<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold text-white mb-4">Web Series</h1>
    <p class="text-gray-400 max-w-2xl">
      Discover the latest web series episodes. Stream or download your favorite content 
      without registration required.
    </p>
  </div>

  <!-- Filters -->
  <div class="bg-gray-800 rounded-lg p-6 mb-8">
    <%= form_with url: web_series_index_path, method: :get, local: true, class: "grid grid-cols-1 md:grid-cols-4 gap-4" do |form| %>
      <div>
        <%= form.label :search, "Search", class: "block text-sm font-medium text-gray-300 mb-2" %>
        <%= form.text_field :search, value: params[:search], 
            placeholder: "Search web series...", 
            class: "w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" %>
      </div>
      
      <div>
        <%= form.label :genre_id, "Genre", class: "block text-sm font-medium text-gray-300 mb-2" %>
        <%= form.select :genre_id, 
            options_from_collection_for_select(@genres, "id", "name", params[:genre_id]), 
            { include_blank: "All Genres" }, 
            { class: "w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" } %>
      </div>
      
      <div>
        <%= form.label :season, "Season", class: "block text-sm font-medium text-gray-300 mb-2" %>
        <%= form.select :season, 
            options_for_select((1..10).map { |n| [n, n] }, params[:season]), 
            { include_blank: "All Seasons" }, 
            { class: "w-full bg-gray-700 text-white rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" } %>
      </div>
      
      <div class="flex items-end">
        <%= form.submit "Filter", class: "w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded transition-colors" %>
      </div>
    <% end %>
  </div>

  <!-- Web Series Grid -->
  <% if @web_series.any? %>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
      <% @web_series.each do |series| %>
        <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg transform transition-all duration-300 hover:scale-105 group">
          <%= link_to web_series_path(series), class: "block" do %>
            <!-- Thumbnail -->
            <div class="relative">
              <% if series.display_poster_url %>
                <%= image_tag series.display_poster_url, 
                    class: "w-full h-48 object-cover transition-transform group-hover:scale-110", 
                    alt: series.title,
                    onerror: "this.parentElement.innerHTML='<div class=\"w-full h-48 bg-gray-700 flex items-center justify-center\"><span class=\"text-gray-400\">No Image</span></div>'" %>
              <% else %>
                <div class="w-full h-48 bg-gray-700 flex items-center justify-center">
                  <span class="text-gray-400">No Image</span>
                </div>
              <% end %>
              
              <!-- Episode Info Overlay -->
              <div class="absolute top-2 left-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs">
                S<%= series.season_number %> E<%= series.episode_number %>
              </div>
              
              <!-- Views Badge -->
              <div class="absolute top-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs">
                <%= series.views_count %> views
              </div>
              
              <!-- Play Button Overlay -->
              <div class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center transform scale-0 group-hover:scale-100 transition-transform">
                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                  </svg>
                </div>
              </div>
            </div>
            
            <!-- Content Info -->
            <div class="p-4">
              <h3 class="font-semibold text-white truncate mb-1"><%= series.title %></h3>
              
              <div class="flex items-center justify-between text-sm text-gray-400 mb-2">
                <span><%= series.genre&.name || 'N/A' %></span>
                <span><%= series.release_date&.strftime('%Y') || 'N/A' %></span>
              </div>
              
              <div class="flex items-center justify-between text-xs text-gray-500">
                <span><%= series.duration %> min</span>
                <% if series.enable_download %>
                  <span class="text-green-400 flex items-center">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                    Download
                  </span>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
    
    <!-- Pagination -->
    <% if @web_series.respond_to?(:current_page) %>
      <div class="mt-12 flex justify-center">
        <%= paginate @web_series %>
      </div>
    <% end %>
  <% else %>
    <!-- No Results -->
    <div class="text-center py-16">
      <div class="w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6">
        <svg class="w-12 h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47.881-6.08 2.32l-.72.72a.999.999 0 01-1.414 0 .999.999 0 010-1.414l.72-.72A7.962 7.962 0 0112 9c2.34 0 4.47-.881 6.08-2.32l.72-.72a.999.999 0 011.414 0 .999.999 0 010 1.414l-.72.72A7.962 7.962 0 0112 15z"></path>
        </svg>
      </div>
      <h3 class="text-xl font-semibold text-white mb-2">No web series found</h3>
      <p class="text-gray-400 mb-6">Try adjusting your search or filter criteria</p>
      <%= link_to "Clear Filters", web_series_index_path, class: "bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors inline-block" %>
    </div>
  <% end %>
</div>